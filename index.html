<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¨€èªè´è¦šå£« å›½å®¶è©¦é¨“ãƒã‚¹ã‚¿ãƒ¼</title>
    <style>
        /* ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®š (CSS) */
        :root {
            --primary-color: #0056b3;
            --accent-color: #e7f1ff;
            --text-color: #333;
            --bg-color: #f4f4f9;
        }

        body {
            font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 600px;
            background: white;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        h1, h2 {
            text-align: center;
            color: var(--primary-color);
        }

        /* ãƒ›ãƒ¼ãƒ ç”»é¢ */
        .menu-grid {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }

        .menu-btn {
            background: white;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            padding: 20px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.3s;
        }

        .menu-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        /* ã‚¯ã‚¤ã‚ºç”»é¢ */
        #quiz-section, #result-section {
            display: none;
            flex-grow: 1;
            flex-direction: column;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #ddd;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary-color);
            width: 0%;
            transition: width 0.3s;
        }

        .question-box {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.1rem;
            font-weight: bold;
        }

        .question-img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            display: none; /* ç”»åƒãŒãªã„å ´åˆã¯éè¡¨ç¤º */
        }

        .options-grid {
            display: grid;
            gap: 10px;
        }

        .option-btn {
            padding: 15px;
            border: 1px solid #ccc;
            background: white;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.2s;
            text-align: left;
        }

        .option-btn:hover {
            background: var(--accent-color);
        }

        .option-btn.correct {
            background-color: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }

        .option-btn.wrong {
            background-color: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }

        /* çµæœç”»é¢ */
        .result-score {
            font-size: 2rem;
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
        }

        .back-btn {
            margin-top: auto;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 15px;
            font-size: 1.2rem;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
        }

        /* ãƒ•ãƒƒã‚¿ãƒ¼ */
        footer {
            text-align: center;
            font-size: 0.8rem;
            color: #888;
            margin-top: 20px;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }
    </style>
</head>
<body>

<div class="container">
    <div id="home-section">
        <h1>è¨€èªè´è¦šå£«<br>å›½è©¦ãƒã‚¹ã‚¿ãƒ¼</h1>
        <p style="text-align: center;">ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
        <div class="menu-grid" id="menu-list">
            </div>
    </div>

    <div id="quiz-section">
        <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
        <div class="question-box">
            <img id="q-image" src="" alt="å•é¡Œç”»åƒ" class="question-img">
            <div id="q-text">ã“ã“ã«å•é¡Œæ–‡ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div>
        </div>
        <div class="options-grid" id="options-list">
            </div>
    </div>

    <div id="result-section">
        <h2>çµæœç™ºè¡¨</h2>
        <div class="result-score" id="score-display"></div>
        <div id="feedback-msg" style="text-align: center; margin-bottom: 20px;"></div>
        <button class="back-btn" onclick="goHome()">ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</button>
    </div>

    <footer>
        &copy; 2024 ST Study App
    </footer>
</div>

<script>
    // === å•é¡Œãƒ‡ãƒ¼ã‚¿ ===
    // ã“ã“ã«å°†æ¥çš„ã«å•é¡Œã‚’è¿½åŠ ã—ã¦ã„ãã¾ã™ã€‚
    // image: "ç”»åƒã®URL" ã¨ã™ã‚‹ã¨ç”»åƒãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚nullãªã‚‰ãƒ†ã‚­ã‚¹ãƒˆã®ã¿ã€‚
    const quizData = {
        "psychoacoustics": {
            title: "éŸ³éŸ¿å¿ƒç†å­¦",
            questions: [
                { q: "ãƒ’ãƒˆã®å¯è´åŸŸã®å‘¨æ³¢æ•°ç¯„å›²ã¯ãŠãŠã‚ˆãã©ã‚Œã‹ã€‚", options: ["20ã€œ20,000Hz", "100ã€œ10,000Hz", "1,000ã€œ4,000Hz", "500ã€œ2,000Hz"], a: "20ã€œ20,000Hz", img: null },
                { q: "éŸ³ã®é«˜ã•ï¼ˆãƒ”ãƒƒãƒï¼‰ã®çŸ¥è¦šã«æœ€ã‚‚å½±éŸ¿ã™ã‚‹ç‰©ç†é‡ã¯ã©ã‚Œã‹ã€‚", options: ["å‘¨æ³¢æ•°", "æŒ¯å¹…", "ä½ç›¸", "å€éŸ³æ§‹æˆ"], a: "å‘¨æ³¢æ•°", img: null },
                { q: "ç­‰ãƒ©ã‚¦ãƒ‰ãƒã‚¹ãƒ¬ãƒ™ãƒ«æ›²ç·šã«ãŠã„ã¦ã€å˜ä½ã¨ã—ã¦ç”¨ã„ã‚‰ã‚Œã‚‹ã®ã¯ã©ã‚Œã‹ã€‚", options: ["phonï¼ˆãƒ›ãƒ³ï¼‰", "soneï¼ˆã‚½ãƒ¼ãƒ³ï¼‰", "melï¼ˆãƒ¡ãƒ«ï¼‰", "dBï¼ˆãƒ‡ã‚·ãƒ™ãƒ«ï¼‰"], a: "phonï¼ˆãƒ›ãƒ³ï¼‰", img: null },
                { q: "ã‚«ã‚¯ãƒ†ãƒ«ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼åŠ¹æœã«é–¢é€£ãŒæ·±ã„ã®ã¯ã©ã‚Œã‹ã€‚", options: ["ä¸¡è€³è´åŠ¹æœ", "ãƒã‚¹ã‚­ãƒ³ã‚°åŠ¹æœ", "ãƒ‰ãƒƒãƒ—ãƒ©ãƒ¼åŠ¹æœ", "ãƒãƒ¼ã‚¹åŠ¹æœ"], a: "ä¸¡è€³è´åŠ¹æœ", img: null },
                { q: "éŸ³ã®å¼·ã•ãŒ10å€ã«ãªã‚‹ã¨ã€éŸ³åœ§ãƒ¬ãƒ™ãƒ«ã¯ä½•dBä¸Šæ˜‡ã™ã‚‹ã‹ã€‚", options: ["10dB", "20dB", "3dB", "6dB"], a: "10dB", img: null },
                { q: "1000Hzã€40dB SPLã®ç´”éŸ³ã®ãƒ©ã‚¦ãƒ‰ãƒã‚¹ãƒ¬ãƒ™ãƒ«ã¯ã„ãã¤ã‹ã€‚", options: ["40phon", "1sone", "1000mel", "40dB HL"], a: "40phon", img: null },
                { q: "ä½ã„å‘¨æ³¢æ•°ã®éŸ³ãŒã€é«˜ã„å‘¨æ³¢æ•°ã®éŸ³ã‚’å¦¨å®³ã—ã‚„ã™ã„ç¾è±¡ã‚’ä½•ã¨å‘¼ã¶ã‹ã€‚", options: ["ä¸Šè¡Œæ€§ãƒã‚¹ã‚­ãƒ³ã‚°", "ä¸‹è¡Œæ€§ãƒã‚¹ã‚­ãƒ³ã‚°", "ä¸­å¿ƒå‘¨æ³¢æ•°", "è‡¨ç•Œå¸¯åŸŸ"], a: "ä¸Šè¡Œæ€§ãƒã‚¹ã‚­ãƒ³ã‚°", img: null },
                { q: "éŸ³ã®3è¦ç´ ã«å«ã¾ã‚Œãªã„ã®ã¯ã©ã‚Œã‹ã€‚", options: ["é€Ÿåº¦", "å¤§ãã•", "é«˜ã•", "éŸ³è‰²"], a: "é€Ÿåº¦", img: null },
                { q: "ã‚¦ã‚§ãƒ¼ãƒãƒ¼ã®æ³•å‰‡ãŒæˆã‚Šç«‹ã¤ã¨ãã€å¼åˆ¥é–¾ã¯åˆºæ¿€é‡ã«å¯¾ã—ã¦ã©ã†ãªã‚‹ã‹ã€‚", options: ["ä¸€å®šã®æ¯”ç‡ã«ãªã‚‹", "ä¸€å®šã®å€¤ã«ãªã‚‹", "ç„¡é–¢ä¿‚ã«ãªã‚‹", "å¯¾æ•°ã«æ¯”ä¾‹ã™ã‚‹"], a: "ä¸€å®šã®æ¯”ç‡ã«ãªã‚‹", img: null },
                { q: "ä¸¡è€³é–“æ™‚é–“å·®ï¼ˆITDï¼‰ãŒéŸ³æºå®šä½ã«æœ‰åŠ¹ãªã®ã¯ã©ã®å‘¨æ³¢æ•°å¸¯åŸŸã‹ã€‚", options: ["ä½å‘¨æ³¢æ•°åŸŸ", "ä¸­å‘¨æ³¢æ•°åŸŸ", "é«˜å‘¨æ³¢æ•°åŸŸ", "å…¨å‘¨æ³¢æ•°åŸŸ"], a: "ä½å‘¨æ³¢æ•°åŸŸ", img: null }
            ]
        },
        "anatomy": {
            title: "è§£å‰–å­¦",
            questions: [
                // ç”»åƒå•é¡Œã®ä¾‹ï¼šæœ¬æ¥ã¯ç”»åƒã®URLã‚’æŒ‡å®šã—ã¾ã™ã€‚ã“ã“ã§ã¯ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’ä½¿ç”¨ã€‚
                { q: "ï¼ˆç”»åƒå•é¡Œï¼‰çŸ¢å°ã§ç¤ºã•ã‚ŒãŸéƒ¨ä½ï¼ˆå–‰é ­è“‹ï¼‰ã®åç§°ã¯ã©ã‚Œã‹ã€‚", options: ["å–‰é ­è“‹", "ç”²çŠ¶è»Ÿéª¨", "æŠ«è£‚è»Ÿéª¨", "è¼ªçŠ¶è»Ÿéª¨"], a: "å–‰é ­è“‹", img: "https://placehold.co/600x400?text=Larynx+Image" },
                { q: "ãƒ–ãƒ­ãƒ¼ã‚«é‡ãŒå­˜åœ¨ã™ã‚‹ã®ã¯å¤§è„³ã®ã©ã®è‘‰ã‹ã€‚", options: ["å‰é ­è‘‰", "å´é ­è‘‰", "é ­é ‚è‘‰", "å¾Œé ­è‘‰"], a: "å‰é ­è‘‰", img: null },
                { q: "è´è¦šé‡ãŒå­˜åœ¨ã™ã‚‹ã®ã¯å¤§è„³ã®ã©ã®å›ã‹ã€‚", options: ["ãƒ˜ã‚·ãƒ¥ãƒ«æ¨ªå›", "ä¸­å¿ƒå‰å›", "ä¸­å¿ƒå¾Œå›", "è§’å›"], a: "ãƒ˜ã‚·ãƒ¥ãƒ«æ¨ªå›", img: null },
                { q: "ä¸­è€³ã«å«ã¾ã‚Œã‚‹è€³å°éª¨ã§ã€é¼“è†œã«æ¥ã—ã¦ã„ã‚‹ã®ã¯ã©ã‚Œã‹ã€‚", options: ["ãƒ„ãƒéª¨", "ã‚­ãƒŒã‚¿éª¨", "ã‚¢ãƒ–ãƒŸéª¨", "è¸ç‰›"], a: "ãƒ„ãƒéª¨", img: null },
                { q: "é¡”é¢ç¥çµŒãŒæ”¯é…ã™ã‚‹ç­‹ã¯ã©ã‚Œã‹ã€‚", options: ["å£è¼ªç­‹", "å’¬ç­‹", "å´é ­ç­‹", "å¤–å´ç¿¼çªç­‹"], a: "å£è¼ªç­‹", img: null },
                { q: "èª¤åš¥ã‚’é˜²ããŸã‚ã«å–‰é ­ã‚’å‰ä¸Šæ–¹ã«æŒ™ä¸Šã•ã›ã‚‹ä¸»ãªç­‹ç¾¤ã¯ã©ã‚Œã‹ã€‚", options: ["èˆŒéª¨ä¸Šç­‹ç¾¤", "èˆŒéª¨ä¸‹ç­‹ç¾¤", "å’½é ­åç¸®ç­‹", "èƒ¸é–ä¹³çªç­‹"], a: "èˆŒéª¨ä¸Šç­‹ç¾¤", img: null },
                { q: "è„³å¹¹ã«å«ã¾ã‚Œãªã„ã®ã¯ã©ã‚Œã‹ã€‚", options: ["å°è„³", "ä¸­è„³", "æ©‹", "å»¶é«„"], a: "å°è„³", img: null },
                { q: "ç¬¬Xè„³ç¥çµŒã®åç§°ã¯ã©ã‚Œã‹ã€‚", options: ["è¿·èµ°ç¥çµŒ", "èˆŒå’½ç¥çµŒ", "å‰¯ç¥çµŒ", "èˆŒä¸‹ç¥çµŒ"], a: "è¿·èµ°ç¥çµŒ", img: null },
                { q: "å£°å¸¯ãƒ’ãƒ€ã®é–‹å¤§ã‚’è¡Œã†å”¯ä¸€ã®ç­‹ã¯ã©ã‚Œã‹ã€‚", options: ["å¾Œè¼ªçŠ¶æŠ«è£‚ç­‹", "å¤–å´è¼ªçŠ¶æŠ«è£‚ç­‹", "ç”²çŠ¶æŠ«è£‚ç­‹", "è¼ªçŠ¶ç”²çŠ¶ç­‹"], a: "å¾Œè¼ªçŠ¶æŠ«è£‚ç­‹", img: null },
                { q: "ï¼ˆç”»åƒå•é¡Œï¼‰çŸ¢å°ã§ç¤ºã•ã‚ŒãŸéƒ¨ä½ï¼ˆæµ·é¦¬ï¼‰ã®æ©Ÿèƒ½ã¨ã—ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œã‹ã€‚", options: ["è¨˜æ†¶ã®å½¢æˆ", "é‹å‹•ã®èª¿æ•´", "è¦–è¦šæƒ…å ±ã®å‡¦ç†", "å‘¼å¸ã®èª¿ç¯€"], a: "è¨˜æ†¶ã®å½¢æˆ", img: "https://placehold.co/600x400?text=Brain+Hippocampus" }
            ]
        },
        "diagnostics": {
            title: "è¨€èªè´è¦šè¨ºæ–­å­¦",
            questions: [
                { q: "æ„Ÿåº¦ï¼ˆSensitivityï¼‰ã®èª¬æ˜ã¨ã—ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œã‹ã€‚", options: ["ç–¾æ‚£ãŒã‚ã‚‹äººã‚’æ­£ã—ãé™½æ€§ã¨åˆ¤å®šã™ã‚‹å‰²åˆ", "ç–¾æ‚£ãŒãªã„äººã‚’æ­£ã—ãé™°æ€§ã¨åˆ¤å®šã™ã‚‹å‰²åˆ", "é™½æ€§ã¨åˆ¤å®šã•ã‚ŒãŸäººã®ã†ã¡å®Ÿéš›ã«ç–¾æ‚£ãŒã‚ã‚‹å‰²åˆ", "é™°æ€§ã¨åˆ¤å®šã•ã‚ŒãŸäººã®ã†ã¡å®Ÿéš›ã«ç–¾æ‚£ãŒãªã„å‰²åˆ"], a: "ç–¾æ‚£ãŒã‚ã‚‹äººã‚’æ­£ã—ãé™½æ€§ã¨åˆ¤å®šã™ã‚‹å‰²åˆ", img: null },
                { q: "æ¨™æº–å¤±èªç—‡æ¤œæŸ»ï¼ˆSLTAï¼‰ã«å«ã¾ã‚Œãªã„ä¸‹ä½æ¤œæŸ»ã¯ã©ã‚Œã‹ã€‚", options: ["èªã®æµæš¢æ€§", "å‘¼ç§°", "å¾©å”±", "æ¼¢å­—å˜èªã®æ›¸å–"], a: "èªã®æµæš¢æ€§", img: null },
                { q: "WABå¤±èªç—‡æ¤œæŸ»ã§ç®—å‡ºã•ã‚Œã‚‹ä¿‚æ•°ã¯ã©ã‚Œã‹ã€‚", options: ["AQï¼ˆå¤±èªæŒ‡æ•°ï¼‰", "IQï¼ˆçŸ¥èƒ½æŒ‡æ•°ï¼‰", "DQï¼ˆç™ºé”æŒ‡æ•°ï¼‰", "SQï¼ˆç¤¾ä¼šç”Ÿæ´»èƒ½åŠ›ï¼‰"], a: "AQï¼ˆå¤±èªæŒ‡æ•°ï¼‰", img: null },
                { q: "è´åŠ›æ¤œæŸ»ã«ãŠã„ã¦ã€æ°—å°è´åŠ›ã¯æ­£å¸¸ã§éª¨å°è´åŠ›ã‚‚æ­£å¸¸ãªå ´åˆã¯ã©ã‚Œã‹ã€‚", options: ["æ­£å¸¸è´åŠ›", "ä¼éŸ³é›£è´", "æ„ŸéŸ³é›£è´", "æ··åˆé›£è´"], a: "æ­£å¸¸è´åŠ›", img: null },
                { q: "æ§‹éŸ³éšœå®³ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã«é©ã•ãªã„ã®ã¯ã©ã‚Œã‹ã€‚", options: ["RCPM", "ãƒ‘ã‚¿ã‚«æ¤œæŸ»", "ä¼šè©±æ˜ç­åº¦è©•ä¾¡", "å£è…”å™¨å®˜ã®è¨ºå¯Ÿ"], a: "RCPM", img: null },
                { q: "MMSEï¼ˆMini-Mental State Examinationï¼‰ã®æº€ç‚¹ã¯ä½•ç‚¹ã‹ã€‚", options: ["30ç‚¹", "20ç‚¹", "50ç‚¹", "100ç‚¹"], a: "30ç‚¹", img: null },
                { q: "åŠå´ç©ºé–“ç„¡è¦–ã®æ¤œæŸ»ã¨ã—ã¦ç”¨ã„ã‚‰ã‚Œã‚‹ã®ã¯ã©ã‚Œã‹ã€‚", options: ["BITè¡Œå‹•æ€§ç„¡è¦–æ¤œæŸ»", "TMT", "FAB", "Ravenè‰²å½©ãƒãƒˆãƒªãƒƒã‚¯ã‚¹"], a: "BITè¡Œå‹•æ€§ç„¡è¦–æ¤œæŸ»", img: null },
                { q: "ç™ºå£°ç™ºèªå™¨å®˜ã®æ¤œæŸ»ã«ãŠã„ã¦ã€è»Ÿå£è“‹ã®æŒ™ä¸Šã‚’ç¢ºèªã™ã‚‹ãŸã‚ã®ç™ºå£°ã¯ã©ã‚Œã‹ã€‚", options: ["/a/", "/i/", "/u/", "/m/"], a: "/a/", img: null },
                { q: "åš¥ä¸‹é€ å½±æ¤œæŸ»ï¼ˆVFï¼‰ã§è©•ä¾¡ã§ããªã„ã®ã¯ã©ã‚Œã‹ã€‚", options: ["å’½é ­ã®çŸ¥è¦š", "èª¤åš¥ã®æœ‰ç„¡", "å’½é ­æ®‹ç•™", "é£Ÿé“å…¥å£éƒ¨ã®é–‹å¤§"], a: "å’½é ­ã®çŸ¥è¦š", img: null },
                { q: "ï¼ˆç”»åƒå•é¡Œï¼‰ã“ã®ã‚ªãƒ¼ã‚¸ã‚ªã‚°ãƒ©ãƒ ï¼ˆæ°—å°ãƒ»éª¨å°å…±ã«ä½ä¸‹ã€Gapãªã—ï¼‰ãŒç¤ºã™é›£è´å‹ã¯ã©ã‚Œã‹ã€‚", options: ["æ„ŸéŸ³é›£è´", "ä¼éŸ³é›£è´", "æ··åˆé›£è´", "æ©Ÿèƒ½æ€§é›£è´"], a: "æ„ŸéŸ³é›£è´", img: "https://placehold.co/600x400?text=Audiogram+SNHL" }
            ]
        }
    };

    // === ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ ===
    let currentSection = null;
    let currentQuestions = [];
    let currentIndex = 0;
    let score = 0;
    let isAnswering = false;

    // åˆæœŸåŒ–ï¼šãƒ›ãƒ¼ãƒ ç”»é¢ã«ãƒœã‚¿ãƒ³ã‚’ç”Ÿæˆ
    function init() {
        const menuList = document.getElementById('menu-list');
        for (const key in quizData) {
            const btn = document.createElement('button');
            btn.className = 'menu-btn';
            btn.innerText = quizData[key].title;
            btn.onclick = () => startQuiz(key);
            menuList.appendChild(btn);
        }
    }

    // ã‚¯ã‚¤ã‚ºé–‹å§‹
    function startQuiz(sectionKey) {
        currentSection = sectionKey;
        currentQuestions = [...quizData[sectionKey].questions];
        // å•é¡Œã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ãŸã„å ´åˆã¯ä»¥ä¸‹ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’å¤–ã™
        // currentQuestions.sort(() => Math.random() - 0.5);
        
        currentIndex = 0;
        score = 0;

        document.getElementById('home-section').style.display = 'none';
        document.getElementById('result-section').style.display = 'none';
        document.getElementById('quiz-section').style.display = 'flex';
        
        loadQuestion();
    }

    // å•é¡Œã®èª­ã¿è¾¼ã¿
    function loadQuestion() {
        isAnswering = true;
        const qData = currentQuestions[currentIndex];
        
        // é€²æ—ãƒãƒ¼æ›´æ–°
        const progressPercent = ((currentIndex) / currentQuestions.length) * 100;
        document.getElementById('progress').style.width = `${progressPercent}%`;

        // ãƒ†ã‚­ã‚¹ãƒˆæ›´æ–°
        document.getElementById('q-text').innerText = `Q${currentIndex + 1}. ${qData.q}`;

        // ç”»åƒå‡¦ç†
        const imgElem = document.getElementById('q-image');
        if (qData.img) {
            imgElem.src = qData.img;
            imgElem.style.display = 'block';
        } else {
            imgElem.style.display = 'none';
        }

        // é¸æŠè‚¢ç”Ÿæˆ
        const optionsDiv = document.getElementById('options-list');
        optionsDiv.innerHTML = '';
        
        // é¸æŠè‚¢ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ã¦è¡¨ç¤º
        const shuffledOptions = [...qData.options].sort(() => Math.random() - 0.5);

        shuffledOptions.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(btn, opt, qData.a);
            optionsDiv.appendChild(btn);
        });
    }

    // è§£ç­”åˆ¤å®š
    function checkAnswer(btn, selected, correct) {
        if (!isAnswering) return; // é€£æ‰“é˜²æ­¢
        isAnswering = false;

        const allBtns = document.querySelectorAll('.option-btn');

        if (selected === correct) {
            btn.classList.add('correct');
            score++;
        } else {
            btn.classList.add('wrong');
            // æ­£è§£ã®ãƒœã‚¿ãƒ³ã‚’æ•™ãˆã¦ã‚ã’ã‚‹
            allBtns.forEach(b => {
                if (b.innerText === correct) {
                    b.classList.add('correct');
                }
            });
        }

        // æ¬¡ã®å•é¡Œã¸ï¼ˆå°‘ã—é…ã‚‰ã›ã‚‹ï¼‰
        setTimeout(() => {
            currentIndex++;
            if (currentIndex < currentQuestions.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }, 1000); // 1ç§’å¾Œã«æ¬¡ã®å•é¡Œã¸
    }

    // çµæœè¡¨ç¤º
    function showResults() {
        document.getElementById('quiz-section').style.display = 'none';
        document.getElementById('result-section').style.display = 'flex';

        const percentage = Math.round((score / currentQuestions.length) * 100);
        document.getElementById('score-display').innerText = `${score} / ${currentQuestions.length} å•æ­£è§£`;
        
        const msgDiv = document.getElementById('feedback-msg');
        if (percentage === 100) {
            msgDiv.innerText = "ç´ æ™´ã‚‰ã—ã„ï¼å…¨å•æ­£è§£ã§ã™ï¼ğŸ‰";
        } else if (percentage >= 80) {
            msgDiv.innerText = "åˆæ ¼åœå†…ã§ã™ï¼ãã®èª¿å­ï¼ğŸ‘";
        } else {
            msgDiv.innerText = "å¾©ç¿’ã—ã¾ã—ã‚‡ã†ï¼ä¼¸ã³ä»£ãŒã‚ã‚Šã¾ã™ğŸ’ª";
        }
    }

    // ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹
    function goHome() {
        document.getElementById('result-section').style.display = 'none';
        document.getElementById('home-section').style.display = 'block';
    }

    // ã‚¢ãƒ—ãƒªèµ·å‹•
    init();

</script>

</body>
</html>